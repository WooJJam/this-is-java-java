# 📌 Chapter9 중첩 선언과 익명 객체

## 1. 중첩 클래스
- 클래스 내부에 선언한 클래스로 외부로 부터 감춤으로써 복잡성을 줄일 수 있음
```
- 인스턴스 멤버 클래스
class A {
	class B {...}
}
조건: A 객체를 생성해야만 B 객체 생성 가능

- 정적 멤버 클래스
class B {
	static class B {...}
}
조건: A 객체를 생성하지 않아도 B 객체를 생성할 수 있음

- 로컬 클래스
class A {
	void method() {
		class B {...}
	}
}
조건: method가 실행할 때만 B 객체를 생성할 수 있음
```
## 2. 인스턴스 멤버 클래스
- 클래스의 멤버로 선언된 또 다른 클래스
  
```
[public] class A {
	[public | private] class B {
	}
}

public class B {} : 다른 패키지에서 B 클래스 사용 가능
class B {} : 같은 패키지에서만 B 클래스 사용 가능
private class B {} : A 클래스 내부에서만 B 클래스 사용 가능
```

- 자바 17부터 내부 클래스에 정적 필드와 정적 메소드가 가능
  ```
  public class A {
  	class B {
  		int field1 = 1;
  		static int field2 = 2;
  		.
  		.
  		.
  		}
  	void useB() {
  		B b = new B();
  		log.debug(b.field1)
  		log.debug(B.field2) // 자바 17 부터 가능
  	}
  }
  ```

## 3. 정적 중첩 클래스
  - 한 클래스 내에 중첩된 정적 클래스
```
    public class Main {
      public static void main(String[] args) {
  		A.B b = new A.B();
  		System.out.println(b.field1);
  		b.method1();

  		System.out.println(A.B.field2);
  		A.B.method2();
	  }

  	class A {
  
  		static class B {
  			int field1 = 1;
  
  			static int field2 = 2;
  
  			B() {
  				System.out.println("B-생성자 실행");
  			}
  
  			void method1() {
  				System.out.println("B-Method 실행");
  			}
  
  			static void method2() {
  				System.out.println("B-method2 실행");
    			}
    		}
    	}
    }
    - new 키워드를 이용하여 인스턴스 객체를 생성할 경우 정적 필드와 메소드를 사용할 수 없다.
    - 정적 필드와 메소드는 클래스 로드 시점에 메모리에 할당되기 때문
    - 하지만 인스턴스 필드와 메소드는 특정 객체 인스턴스에 속하므로, 인스턴스가 생성된 후에만 접근 가능
```

## 4. 로컬 클래스
  - 생성자 또는 메소드 내부에서 선언된 클래스
  ```
class A {
	
	public A() {
		
		class B { }
		
	}
	
	public void method() {
	class B { }
}

여기서 B 클래스는 로컬 클래스가 된다.
```
  - 로컬 변수를 로컬 클래스에서 사용할 경우 final 특성을 갖게 되어 값을 읽을 수만 있고, 수정은 불가능
```
public class A {
	
	public void method1(int arg) {
		
		int var = 1;
		
		class B {
		
			void method2() {
				System.out.println("arg: "+ arg );
				System.out.println("var: "+ var);
				
				arg = 2 => 불가능
				var = 3 => 불가능
			}

		arg = 2 => 불가능
		var = 3 => 불가능
		}
	}
}
```

## 5. 바깥 멤버 접근
  - **중첩 클래스**는 바깥 클래스와 긴밀한 관계를 맺으면서 바깥 클래스의 멤버에 접근할 수 있음
  - **정적 멤버 클래스**는 바깥 객체가 없어도 사용 가능해야 하므로 바깥 클래스의 인스턴스 필드와 인스턴스 메소드는 **사용 불가**
```
class A {
	
	int field1;
	void method1() { }
	
	static int field2;
	static void method2() { }
	
	class B {
		void methodB() {
			field1 = 10;
			method1();
			field2 = 10;
			method2(); -> 4개 모두 가능
		}


	static class C {
		void mehtod() {
			field1 = 10; => 불가능
			method1(); => 불가능
			
		field2 = 10; => 가능
		method2() => 가능
		}
	}
```

## 6. 중첩 인터페이스
  - 클래스의 멤버로 선언된 인터페이스
  - 클래스와 긴밀한 관계를 맺는 구현 객체를 만들기 위해서
```
class A {
    [public | private] [static] interface B {
        //상수 필드
        //추상 메소드
        //디폴트 메소드
        //정적 메소드
    }
}

❗️ 사실 중첩 인터페이스는 안드로이드 같은 UI 프로그램에서 이벤트 처리 목적으로 많이 활용되므로 생략
```

## 7. 익명 객체
  - 이름이 없는 객체, 명시적으로 클래스를 선언하지 않기 때문에 객체를 쉽게 생성 가능
  - 이름이 없다는 말은 결국 나중에 다시 불릴 필요가 없다는 말로 해석할 수 있음
  - 즉) 서비스 내에서 단 한번 호출되거나 **일시적으로 단발성 호출**이 되는 경우, **재사용성**, **확장성 및 유지보수**를 생각할 필요가 없는 경우
    ### 7.1. 익명 자식 객체
      - 부모 객체를 상속받아 생성
        ```
        new 부모생성자(매개값, ...) {
      	//필드
      	//메소드
        }
      
        public class Tire() {
	
        	public void roll() {
        		println("일반 타이어 굴러감")
        	}
        }

        public class Car {
        
        	private Tire tire1 = new Tire();
        	
        	//필드에 익명 자식 객체 대입
        	private Tire tire2 = new Tire() {
        		@Override
        		public void roll() {
        			println("익명 자식 Tire 객체 1이 굴러가는중");
        		}
        	}

        	public void run1() {
        		tire1.roll();
        		tire2.roll();
        	}
        	
        	public void run2() {
        		Tire tire = new Tire();
        		@Override
        		public void roll() {
        			println("익명 자식 Tire 객체 2가 굴러가는중")
        		}
        	};
        	
        	public void run3(Tire tire) {
        		tire.roll();
        	}
          }
        
          Car car = new Car();
          car.run1();
          car.run2();
          car.run3(new Tier() {
          	@Override
          	public void roll() {
          		println("익명 자식 Tire 객체 3이 굴러가는중");
          })
          QUIZ) 다음 코드는 어떻게 출력?
          ```
